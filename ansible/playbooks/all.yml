---
- name: Configure dns VM
  hosts: dns
  become: yes
  vars_files:
    - ../group_vars/all.yml
  roles:
    - dns
    - rsyslog_client
    - telegraf

- name: Configure logcollector VM
  hosts: logcollector
  become: yes
  vars_files:
    - ../group_vars/all.yml
  roles:
    - logcollector
    - rsyslog_client
    - telegraf

- name: Configure proxmox-backup VM
  hosts: proxmox_backup
  become: yes
  vars_files:
    - ../group_vars/all.yml
  roles:
    - proxmox_backup
    - rsyslog_client
    - telegraf

- name: Configure homebridge VM
  hosts: homebridge
  become: yes
  vars_files:
    - ../group_vars/all.yml
  roles:
    - homebridge
    - rsyslog_client
    - telegraf

- name: Configure multicast-relay VM
  hosts: multicast_relay
  become: yes
  vars_files:
    - ../group_vars/all.yml
  roles:
    - multicast_relay
    - rsyslog_client
    - telegraf

- name: Configure docker VM
  hosts: docker
  become: yes
  vars_files:
    - ../group_vars/all.yml
  roles:
    - docker
    - rsyslog_client
    - telegraf

- name: Configure plex VM
  hosts: plex
  become: yes
  vars_files:
    - ../group_vars/all.yml
  roles:
    - plex
    - rsyslog_client
    - telegraf

- name: Configure openobserve VM
  hosts: openobserve
  become: yes
  vars_files:
    - ../group_vars/all.yml
  roles:
    - openobserve
    - rsyslog_client
    - telegraf