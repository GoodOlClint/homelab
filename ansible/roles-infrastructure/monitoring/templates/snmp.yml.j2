# SNMP Exporter Configuration for Synology NAS
# Compatible with snmp_exporter v0.29.0
auths:
  public_v2:
    community: {{ synology_snmp_community }}
    security_level: noAuthNoPriv
    auth_protocol: MD5
    priv_protocol: DES
    version: 2

modules:
  synology:
    walk:
      - 1.3.6.1.2.1.1             # System MIB
      - 1.3.6.1.2.1.2             # Interfaces
      - 1.3.6.1.2.1.25            # Host Resources  
      - 1.3.6.1.2.1.31            # Interface Extensions
      - 1.3.6.1.4.1.2021          # UCD-SNMP-MIB (CPU, Memory, Load)
      - 1.3.6.1.4.1.6574          # Synology MIB (System status, Disks, RAID)
    metrics:
      # Synology System Information
      - name: modelName
        oid: 1.3.6.1.4.1.6574.1.5.1
        type: DisplayString
        help: Model name of the Synology NAS
      - name: serialNumber
        oid: 1.3.6.1.4.1.6574.1.5.2
        type: DisplayString
        help: Serial number of the NAS
      - name: version
        oid: 1.3.6.1.4.1.6574.1.5.3
        type: DisplayString
        help: DSM version
      - name: systemStatus
        oid: 1.3.6.1.4.1.6574.1.1
        type: gauge
        help: Synology system status (1=Normal, 2=Failed)
        enum_values:
          1: Normal
          2: Failed
      - name: temperature
        oid: 1.3.6.1.4.1.6574.1.2
        type: gauge
        help: System temperature in Celsius
      - name: powerStatus
        oid: 1.3.6.1.4.1.6574.1.3
        type: gauge
        help: Power status (1=Normal, 2=Failed)
        enum_values:
          1: Normal
          2: Failed
      - name: systemFanStatus
        oid: 1.3.6.1.4.1.6574.1.4.1
        type: gauge
        help: System fan status (1=Normal, 2=Failed)
        enum_values:
          1: Normal
          2: Failed
      - name: cpuFanStatus
        oid: 1.3.6.1.4.1.6574.1.4.2
        type: gauge
        help: CPU fan status (1=Normal, 2=Failed)
        enum_values:
          1: Normal
          2: Failed
      # Disk Information
      - name: diskIndex
        oid: 1.3.6.1.4.1.6574.2.1.1.1
        type: gauge
        help: Disk index
        indexes:
          - labelname: diskIndex
            type: gauge
      - name: diskID
        oid: 1.3.6.1.4.1.6574.2.1.1.2
        type: DisplayString
        help: Disk ID
        indexes:
          - labelname: diskIndex
            type: gauge
      - name: diskModel
        oid: 1.3.6.1.4.1.6574.2.1.1.3
        type: DisplayString
        help: Disk model
        indexes:
          - labelname: diskIndex
            type: gauge
      - name: diskType
        oid: 1.3.6.1.4.1.6574.2.1.1.4
        type: DisplayString
        help: Disk type
        indexes:
          - labelname: diskIndex
            type: gauge
      - name: diskStatus
        oid: 1.3.6.1.4.1.6574.2.1.1.5
        type: gauge
        help: Disk status (1=Normal, 2=Initialized, 3=NotInitialized, 4=SystemPartitionFailed, 5=Crashed)
        indexes:
          - labelname: diskIndex
            type: gauge
        enum_values:
          1: Normal
          2: Initialized
          3: NotInitialized
          4: SystemPartitionFailed
          5: Crashed
      - name: diskTemperature
        oid: 1.3.6.1.4.1.6574.2.1.1.6
        type: gauge
        help: Disk temperature in Celsius
        indexes:
          - labelname: diskIndex
            type: gauge
      # RAID Information
      - name: raidIndex
        oid: 1.3.6.1.4.1.6574.3.1.1.1
        type: gauge
        help: RAID index
        indexes:
          - labelname: raidIndex
            type: gauge
      - name: raidName
        oid: 1.3.6.1.4.1.6574.3.1.1.2
        type: DisplayString
        help: RAID name
        indexes:
          - labelname: raidIndex
            type: gauge
      - name: raidStatus
        oid: 1.3.6.1.4.1.6574.3.1.1.3
        type: gauge
        help: RAID status (1=Normal, 2=Repairing, 3=Migrating, 4=Expanding, 5=Deleting, 6=Creating, 7=RaidSyncing, 8=RaidParityChecking, 9=RaidAssembling, 10=Canceling, 11=Degrade, 12=Crashed)
        indexes:
          - labelname: raidIndex
            type: gauge
        enum_values:
          1: Normal
          2: Repairing
          3: Migrating
          4: Expanding
          5: Deleting
          6: Creating
          7: RaidSyncing
          8: RaidParityChecking
          9: RaidAssembling
          10: Canceling
          11: Degrade
          12: Crashed
      - name: raidFreeSize
        oid: 1.3.6.1.4.1.6574.3.1.1.4
        type: gauge
        help: RAID free size in bytes
        indexes:
          - labelname: raidIndex
            type: gauge
      - name: raidTotalSize
        oid: 1.3.6.1.4.1.6574.3.1.1.5
        type: gauge
        help: RAID total size in bytes
        indexes:
          - labelname: raidIndex
            type: gauge
      # Services
      - name: serviceName
        oid: 1.3.6.1.4.1.6574.6.1.1.2
        type: DisplayString
        help: Service name
        indexes:
          - labelname: serviceIndex
            type: gauge
      - name: serviceUsers
        oid: 1.3.6.1.4.1.6574.6.1.1.3
        type: gauge
        help: Number of users connected to service
        indexes:
          - labelname: serviceIndex
            type: gauge
      - name: upgradeAvailable
        oid: 1.3.6.1.4.1.6574.1.5.4
        type: gauge
        help: Upgrade available (1=Available, 2=Unavailable, 3=Connecting, 4=Disconnected, 5=Others)
        enum_values:
          1: Available
          2: Unavailable
          3: Connecting
          4: Disconnected
          5: Others
      # UCD-SNMP CPU Metrics
      - name: ssCpuUser
        oid: 1.3.6.1.4.1.2021.11.9
        type: gauge
        help: CPU user percentage
      - name: ssCpuSystem
        oid: 1.3.6.1.4.1.2021.11.10
        type: gauge
        help: CPU system percentage
      - name: ssCpuIdle
        oid: 1.3.6.1.4.1.2021.11.11
        type: gauge
        help: CPU idle percentage
      - name: ssCpuRawUser
        oid: 1.3.6.1.4.1.2021.11.50
        type: counter
        help: CPU raw user ticks
      - name: ssCpuRawNice
        oid: 1.3.6.1.4.1.2021.11.51
        type: counter
        help: CPU raw nice ticks
      - name: ssCpuRawSystem
        oid: 1.3.6.1.4.1.2021.11.52
        type: counter
        help: CPU raw system ticks
      - name: ssCpuRawIdle
        oid: 1.3.6.1.4.1.2021.11.53
        type: counter
        help: CPU raw idle ticks
      - name: ssCpuRawWait
        oid: 1.3.6.1.4.1.2021.11.54
        type: counter
        help: CPU raw wait ticks
      - name: ssCpuRawInterrupt
        oid: 1.3.6.1.4.1.2021.11.56
        type: counter
        help: CPU raw interrupt ticks
      # UCD-SNMP Memory Metrics
      - name: memTotalReal
        oid: 1.3.6.1.4.1.2021.4.5
        type: gauge
        help: Total real/physical memory in KB
      - name: memAvailReal
        oid: 1.3.6.1.4.1.2021.4.6
        type: gauge
        help: Available real/physical memory in KB
      - name: memBuffer
        oid: 1.3.6.1.4.1.2021.4.14
        type: gauge
        help: Memory used for buffers in KB
      - name: memCached
        oid: 1.3.6.1.4.1.2021.4.15
        type: gauge
        help: Memory used for cache in KB
      - name: memShared
        oid: 1.3.6.1.4.1.2021.4.13
        type: gauge
        help: Shared memory in KB
      - name: memTotalSwap
        oid: 1.3.6.1.4.1.2021.4.3
        type: gauge
        help: Total swap space in KB
      - name: memAvailSwap
        oid: 1.3.6.1.4.1.2021.4.4
        type: gauge
        help: Available swap space in KB
      # UCD-SNMP Load Average
      - name: laLoadInt
        oid: 1.3.6.1.4.1.2021.10.1.5
        type: gauge
        help: Load average (integer representation)
        indexes:
          - labelname: laIndex
            type: gauge
        lookups:
          - labels:
            - laIndex
            labelname: laNames
            oid: 1.3.6.1.4.1.2021.10.1.2
            type: DisplayString
      # Host Resources Uptime
      - name: hrSystemUptime
        oid: 1.3.6.1.2.1.25.1.1
        type: gauge
        help: System uptime in hundredths of a second
      # Interface Metrics
      - name: ifName
        oid: 1.3.6.1.2.1.31.1.1.1.1
        type: DisplayString
        help: Interface name
        indexes:
          - labelname: ifIndex
            type: gauge
      - name: ifPhysAddress
        oid: 1.3.6.1.2.1.2.2.1.6
        type: PhysAddress48
        help: Physical address (MAC)
        indexes:
          - labelname: ifIndex
            type: gauge
      - name: ifSpeed
        oid: 1.3.6.1.2.1.2.2.1.5
        type: gauge
        help: Interface speed in bits per second
        indexes:
          - labelname: ifIndex
            type: gauge
      - name: ifOperStatus
        oid: 1.3.6.1.2.1.2.2.1.8
        type: gauge
        help: Interface operational status
        indexes:
          - labelname: ifIndex
            type: gauge
        enum_values:
          1: up
          2: down
          3: testing
          4: unknown
          5: dormant
          6: notPresent
          7: lowerLayerDown
      # Additional interface metrics for traffic and errors
      - name: ifHCInOctets
        oid: 1.3.6.1.2.1.31.1.1.1.6
        type: counter
        help: Total bytes received (64-bit counter)
        indexes:
          - labelname: ifIndex
            type: gauge
      - name: ifHCOutOctets
        oid: 1.3.6.1.2.1.31.1.1.1.10
        type: counter
        help: Total bytes transmitted (64-bit counter)
        indexes:
          - labelname: ifIndex
            type: gauge
      - name: ifInDiscards
        oid: 1.3.6.1.2.1.2.2.1.13
        type: counter
        help: Inbound packets discarded
        indexes:
          - labelname: ifIndex
            type: gauge
      - name: ifInErrors
        oid: 1.3.6.1.2.1.2.2.1.14
        type: counter
        help: Inbound packets with errors
        indexes:
          - labelname: ifIndex
            type: gauge
      - name: ifOutDiscards
        oid: 1.3.6.1.2.1.2.2.1.19
        type: counter
        help: Outbound packets discarded
        indexes:
          - labelname: ifIndex
            type: gauge
      - name: ifOutErrors
        oid: 1.3.6.1.2.1.2.2.1.20
        type: counter
        help: Outbound packets with errors
        indexes:
          - labelname: ifIndex
            type: gauge
